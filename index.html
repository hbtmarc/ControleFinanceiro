<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro Pessoal</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <h1>Meu Painel Financeiro</h1>
    </header>

    <main>
        <section id="dashboard">
            <div class="kpi-summary">
                <div class="card">
                    <h2>Total de Entradas</h2>
                    <p id="kpi-total-income">R$ 0,00</p>
                </div>
                <div class="card">
                    <h2>Total de Saídas (Pagas)</h2>
                    <p id="kpi-total-expenses">R$ 0,00</p>
                </div>
                <div class="card card-balance">
                    <h2>Saldo Atual</h2>
                    <p id="kpi-balance">R$ 0,00</p>
                </div>
                <div class="card card-pending">
                    <h2>Contas a Pagar</h2>
                    <p id="kpi-pending-bills">R$ 0,00</p>
                </div>
            </div>
            <div class="feedback-message-container">
                <p id="feedback-message">Carregando seu resumo financeiro...</p>
            </div>
            <div class="charts-container">
                <div class="chart-card">
                    <h3>Gastos vs. Metas</h3>
                    <canvas id="spending-goals-chart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Top 7 Categorias de Gastos</h3>
                    <canvas id="category-spending-chart"></canvas>
                </div>
                <div class="chart-card chart-card-full">
                    <h3>Visão Anual (Entradas vs. Saídas)</h3>
                    <canvas id="annual-summary-chart"></canvas>
                </div>
            </div>
        </section>

        <section id="monthly-view">
            <div class="monthly-view-header">
                <h2>Transações do Mês</h2>
                <div class="month-selector">
                    <button id="prev-month-btn" class="material-symbols-outlined">chevron_left</button>
                    <h3 id="current-month-display">Janeiro 2025</h3>
                    <button id="next-month-btn" class="material-symbols-outlined">chevron_right</button>
                </div>
            </div>

            <div class="transactions-tables">
                <div class="table-container">
                    <h3>Entradas</h3>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Descrição</th>
                                    <th>Valor</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="income-table-body">
                                </tbody>
                        </table>
                    </div>
                </div>

                <div class="table-container">
                    <h3>Despesas</h3>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Pago</th>
                                    <th>Descrição</th>
                                    <th>Dia</th>
                                    <th>Pagamento</th>
                                    <th>Tipo</th>
                                    <th>Categoria</th>
                                    <th>Valor</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="expenses-table-body">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <button id="add-transaction-btn" class="fab">
        <span class="material-symbols-outlined">add</span>
    </button>

    <dialog id="transaction-modal">
        <form id="transaction-form">
            <h3 id="modal-title">Adicionar Nova Transação</h3>
            <input type="hidden" id="transaction-id">
            <input type="hidden" id="transaction-type" value="expenses">
            
            <div class="form-group">
                <label>Tipo:</label>
                <div class="toggle-switch">
                    <button type="button" id="toggle-income">Entrada</button>
                    <button type="button" id="toggle-expense" class="active">Despesa</button>
                </div>
            </div>
            
            <div class="form-group">
                <label for="description">Descrição</label>
                <input type="text" id="description" required>
            </div>
            
            <div class="form-group">
                <label for="amount">Valor</label>
                <input type="number" id="amount" step="0.01" min="0" required>
            </div>
            
            <div id="expense-fields">
                <div class="form-group">
                    <label for="day">Dia</label>
                    <input type="number" id="day" min="1" max="31" required>
                </div>
                
                <div class="form-group">
                    <label for="payment-method">Forma de Pagamento</label>
                    <select id="payment-method" required>
                        </select>
                </div>
                
                <div class="form-group">
                    <label for="expense-type">Tipo de Gasto</label>
                    <select id="expense-type" required>
                        <option value="Essenciais">Essenciais</option>
                        <option value="Não Essenciais">Não Essenciais</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="category">Categoria</label>
                    <select id="category" required>
                        </select>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" id="close-modal-btn">Cancelar</button>
                <button type="submit">Salvar</button>
            </div>
        </form>
    </dialog>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/app.js"></script>
</body>
</html>